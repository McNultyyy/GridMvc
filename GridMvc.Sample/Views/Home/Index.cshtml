@using GridMvc.Html
@using GridMvc.Sample.Models
@using GridMvc.Sorting
@model GridMvc.Sample.Models.Grids.OrdersGrid
@{
    ViewBag.Title = "Home Page";
}


<h2>Orders administration</h2>
<p>
    This page demonstrates the possibilities of Grid.Mvc. For more documentation, please
    see: <a href="http://gridmvc.codeplex.com/">http://gridmvc.codeplex.com/</a>
</p>
@Html.Partial("_OrdersGridCode")
<div class="row-fluid">
    <div class="span9">
        @Html.Partial("_OrdersGrid", Model) @* configure grid in a partial view *@
    </div>

    <div class="span3">
        <h4>Order details
        </h4>
        <div id="order-content">
            <p class="muted">
                Select order to display detailed infomation
            </p>
        </div>
    </div>
</div>
<script>
    if (window.pageGrids && pageGrids.ordersGrid) {
        pageGrids.ordersGrid.addFilterWidget(new CustomersFilterWidget());

        pageGrids.ordersGrid.onRowSelect(function (row) {
            //alert(row.OrderID);
            $.post("/Home/GetOrder?id=" + row.OrderID, function (data) {
                if (data.Status <= 0) {
                    alert(data.Message);
                    return;
                }
                $("#order-content").html(data.Content);
            });
        });
    }
</script>
